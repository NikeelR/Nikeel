!function(){"use strict";!function(){function e(){return e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},e.apply(this,arguments)}var t=window.wp.element,n=window.wp.blocks,o=window.wp.blockEditor;class r extends t.Component{constructor(){super(...arguments),this.state={hasError:!1}}componentDidCatch(){this.setState({hasError:!0})}render(){return this.state.hasError?this.props.fallback:this.props.children}}function l(e){let{children:n,isHtml:r,...l}=e;return(0,t.createElement)("div",(0,o.useBlockProps)(l,{__unstableIsHtml:r}),n)}var c=window.wp.data,s=window.wp.components,i=window.wp.compose,a=window.wp.dom,d=window.lodash;const u=(0,t.createContext)(),m=(0,t.createContext)(),p=(0,c.withSelect)(((e,t)=>{let{clientId:n,rootClientId:r}=t;const{isBlockSelected:l,getBlockMode:c,isSelectionEnabled:s,getTemplateLock:i,__unstableGetBlockWithoutInnerBlocks:a,canRemoveBlock:d,canMoveBlock:u}=e(o.store),m=a(n),p=l(n),g=i(r),h=d(n,r),k=u(n,r),{name:f,attributes:v,isValid:w}=m||{};return{mode:c(n),isSelectionEnabled:s(),isLocked:!!g,canRemove:h,canMove:k,block:m,name:f,attributes:v,isValid:w,isSelected:p}})),g=(0,c.withDispatch)(((e,t,r)=>{let{select:l}=r;const{updateBlockAttributes:c,insertBlocks:s,mergeBlocks:i,replaceBlocks:a,toggleSelection:d,__unstableMarkLastChangeAsPersistent:u}=e(o.store);return{setAttributes(e){const{getMultiSelectedBlockClientIds:n}=l(o.store),r=n(),{clientId:s}=t,i=r.length?r:[s];c(i,e)},onInsertBlocks(e,n){const{rootClientId:o}=t;s(e,n,o)},onInsertBlocksAfter(e){const{clientId:n,rootClientId:r}=t,{getBlockIndex:c}=l(o.store),i=c(n);s(e,i+1,r)},onMerge(e){const{clientId:n}=t,{getPreviousBlockClientId:r,getNextBlockClientId:c}=l(o.store);if(e){const e=c(n);e&&i(n,e)}else{const e=r(n);e&&i(e,n)}},onReplace(e,o,r){e.length&&!(0,n.isUnmodifiedDefaultBlock)(e[e.length-1])&&u(),a([t.clientId],e,o,r)},toggleSelection(e){d(e)}}})),h=(0,i.compose)(i.pure,p,g,(0,i.ifCondition)((e=>{let{block:t}=e;return!!t})),(0,s.withFilters)("editor.BlockListBlockInner"))((function(e){var s;let{mode:i,isLocked:u,canRemove:p,clientId:g,isSelected:h,isSelectionEnabled:k,className:f,name:v,isValid:w,attributes:b,wrapperProps:E,setAttributes:y,onReplace:I,onInsertBlocksAfter:B,onMerge:S,toggleSelection:C}=e;const x=(0,c.useSelect)((e=>{const{getSettings:t}=e(o.store);return t().supportsLayout}),[]),{removeBlock:L}=(0,c.useDispatch)(o.store),N=(0,t.useCallback)((()=>L(g)),[g]);let M=(0,t.createElement)(o.BlockEdit,{name:v,isSelected:h,attributes:b,setAttributes:y,insertBlocksAfter:u?void 0:B,onReplace:p?I:void 0,onRemove:p?N:void 0,mergeBlocks:p?S:void 0,clientId:g,isSelectionEnabled:k,toggleSelection:C});const P=(0,n.getBlockType)(v);null!=P&&P.getEditWrapperProps&&(E=function(e,t){const n={...e,...t};return e&&t&&e.className&&t.className&&(n.className=`${e.className} ${t.className}`),e&&t&&e.style&&t.style&&(n.style={...e.style,...t.style}),n}(E,P.getEditWrapperProps(b)));const A=E&&!!E["data-align"]&&!x;let T;if(A&&(M=(0,t.createElement)("div",{className:"wp-block","data-align":E["data-align"]},M)),w)T="html"===i?(0,t.createElement)(t.Fragment,null,(0,t.createElement)("div",{style:{display:"none"}},M),(0,t.createElement)(l,{isHtml:!0},(0,t.createElement)(t.BlockHtml,{clientId:g}))):(null==P?void 0:P.apiVersion)>1?M:(0,t.createElement)(l,E,M);else{const e=getSaveContent(P,b);T=(0,t.createElement)(l,{className:"has-warning"},(0,t.createElement)(t.RawHTML,null,(0,a.safeHTML)(e)))}const D={clientId:g,className:null!==(s=E)&&void 0!==s&&s["data-align"]&&x?classnames(f,`align${E["data-align"]}`):f,wrapperProps:(0,d.omit)(E,["data-align"]),isAligned:A},j=(0,t.useMemo)((()=>D),Object.values(D));return(0,t.createElement)(m.Provider,{value:j},(0,t.createElement)(r,{fallback:(0,t.createElement)(l,{className:"has-warning"},(0,t.createElement)("div",null,"This block has encountered an error and cannot be previewed."))},T))})),k=e=>{let{rootClientId:n,orderIndex:r}=e;const[l,s]=(0,t.useState)(new Set),i=(0,t.useMemo)((()=>{const{IntersectionObserver:e}=window;if(e)return new e((e=>{s((t=>{const n=new Set(t);for(const t of e){const e=t.target.getAttribute("data-block");n[t.isIntersecting?"add":"delete"](e)}return n}))}))}),[s]),{order:a,selectedBlocks:d}=(0,c.useSelect)((e=>{const{getBlockOrder:t,getSelectedBlockClientIds:r}=e(o.store);return{order:t(n),selectedBlocks:r()}}),[n]),m=a[r];return m?(0,t.createElement)(u.Provider,{value:i},(0,t.createElement)(c.AsyncModeProvider,{key:m,value:!l.has(m)&&!d.includes(m)},(0,t.createElement)(h,{rootClientId:n,clientId:m}))):null};function f(e){return(0,t.createElement)(c.AsyncModeProvider,{value:!1},(0,t.createElement)(k,e))}const v=e=>{let{className:n,orderIndex:r,clientId:l,highlight:c}=e;const s=(0,o.useBlockEditContext)();return(0,t.createElement)(o.BlockContextProvider,{value:s},(0,t.createElement)("div",{className:c?"reserved-block":null},(0,t.createElement)(f,{rootClientId:l,orderIndex:r,className:n})))},w=/<!--[ \t\r\n]+(?<void>wp:[a-z0-9\-\/]+)[ \t\r\n]+.*\/-->|<!--[ \t\r\n]+(?<begin>wp:[a-z0-9\-\/]+)[ \t\r\n]+.*-->|<!--[ \t\r\n]+\/(?<end>wp:[a-z0-9\-\/]+)[ \t\r\n]+-->|/g;v.getChildren=e=>{let t=e.props.children||"";const n=t.matchAll(w);let o=0,r=0,l=0;const c=[];for(;;){const{value:e}=n.next();if(!e)break;e.groups.end?(l=e.index+e[0].length,o-=1):e.groups.void?l=e.index+e[0].length:e.groups.begin&&(o+=1),0===o&&l!==r&&(c.push(t.substring(r,l).trim()),r=l+1)}return c.filter((e=>!!e.trim()))};var b=v;const E=["core/group"],y={color:"#1f81ff",textDecoration:"underline"};var I=e=>{let{totalChildBlockCount:n,name:r,highlight:l,lock:c,syncing:i,onLock:a,onSync:d}=e;const u=(0,t.useMemo)((()=>{const e=[];for(let t=0;t<n;t+=1)e.push(["core/group",{}]);return e}),[n]),[m,p]=(0,t.useState)(!0);return(0,t.createElement)("div",{style:{padding:20,color:"#1e1e1e",boxShadow:"inset 0 0 0 1px #1e1e1e"}},(0,t.createElement)("div",{style:{display:"flex",fontSize:20,fontWeight:400}},(0,t.createElement)(s.Icon,{icon:"admin-appearance"}),(0,t.createElement)("div",{style:{fontSize:16,flexGrow:1,marginLeft:10}}," pxCode ",r," Widget"),(0,t.createElement)(s.Icon,{onClick:d,icon:"update",style:{marginLeft:"auto",marginTop:5,marginRight:5,width:20,height:20,cursor:"pointer",animation:i?"spin 2s linear infinite":null}}),(0,t.createElement)(s.Icon,{onClick:e=>a(!c),icon:c?"lock":"unlock",style:{marginLeft:"auto",marginTop:5,width:30,height:30,cursor:"pointer"}}),(0,t.createElement)(s.Icon,{onClick:e=>p(!m),icon:m?"arrow-up-alt2":"arrow-down-alt2",style:{marginLeft:"auto",marginTop:5,width:30,height:30,cursor:"pointer"}})),(0,t.createElement)("div",{style:{fontSize:12}},"There are ",(0,t.createElement)("span",{style:l?y:null},n," pxCode placeholder",n>1?"s":""),", you have added block",n>1?"s":"","."),(0,t.createElement)("div",{style:{height:m?0:"auto",overflow:"hidden",marginTop:m?null:10}},(0,t.createElement)(s.SlotFillProvider,null,(0,t.createElement)(o.InnerBlocks,{template:u,templateLock:!!c&&"all",allowedBlocks:E,renderAppender:!1}))))};async function B(e,t){const n=await fetch(`/?rest_route=/pxcode/v1/sync/${e}`),{code:o}=await n.json();t(o.replace(/"use strict";/g,""))}function S(e,n){return e?new Function("props",`return function(props) { ${e} return result; }`)()(n):{code:(0,t.createElement)("div",{style:{marginTop:10,marginLeft:10,fontSize:12}},"Loading from pxCode ..."),count:0}}var C=JSON.parse('{"$schema":"https://json.schemastore.org/block.json","apiVersion":2,"name":"pxcode-gutenberg/nike","title":"Nike","description":"This Nike component is exported from pxCode, you can get more document from https://www.pxcode.io .","keywords":["Nike","pxcode"],"textdomain":"pxcode-gutenberg-nike","icon":"admin-appearance","category":"design","example":{},"attributes":{"content":{"type":"string"}},"editorScript":"file:./build/index.js","editorStyle":"file:./style.css"}');const{name:x}=C,L="6234357fc9e11200133195a3/62343597ab2b260013afdb63/Nike";(0,n.registerBlockCollection)("pxcode-gutenberg",{title:"pxcode"}),(0,n.registerBlockType)(x,{edit:n=>{let{clientId:r,attributes:{content:l},setAttributes:c}=n;const{plugInUrl:s}=nikeInject;!function(){const e=document.querySelector('iframe[name="editor-canvas"]');if(e){const t="https://cdn.jsdelivr.net/gh/px2code/posize/build/v1.00.3.js";if(e.contentDocument.body&&!e.contentDocument.querySelector(`script[src="${t}"]`)){const n=e.contentDocument.createElement("script");n.src=t,n.async=!0,e.contentDocument.body.appendChild(n)}}}(),function(){const e=document.querySelector('iframe[name="editor-canvas"]');if(e){const t="/wp-includes/css/dashicons.css";if(e.contentDocument.body&&!e.contentDocument.querySelector(`link[href="${t}"]`)){const n=e.contentDocument.createElement("link");n.href=t,n.rel="stylesheet",n.async=!0,e.contentDocument.head.appendChild(n)}}}(),l||B(L,(e=>c({content:e})));const i=(0,o.useBlockProps)(),[a,d]=(0,t.useState)(!1),[u,m]=(0,t.useState)(!1),{code:p,count:g}=S(l,{edit:!0,clientId:r,highlight:u,InnerBlocks:o.InnerBlocks,Fragment:t.Fragment,Placeholder:b,plugInUrl:s});return(0,t.createElement)("div",e({},i,{onMouseEnter:()=>m(!0),onMouseLeave:()=>m(!1),tabIndex:a?1:null}),(0,t.createElement)(I,{name:"Nike",totalChildBlockCount:g,highlight:u,lock:a,onLock:e=>d(e),syncing:!l,onSync:()=>{c({content:null}),B(L,(e=>c({content:e})))}}),p)},save:e=>{let{attributes:{content:n}}=e;const{plugInUrl:r}=nikeInject,l=o.useBlockProps.save(),c=b.getChildren(o.InnerBlocks.Content()),{code:s}=S(n,{edit:!1,Fragment:t.Fragment,children:c,RawHTML:t.RawHTML,plugInUrl:r});return(0,t.createElement)("div",l,s)}})}()}();